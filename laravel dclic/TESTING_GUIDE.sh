#!/bin/bash

# ğŸš€ GUIDE DE DÃ‰MARRAGE - Tests Manuels

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "  ğŸš€ GUIDE POUR TESTER L'IMPLÃ‰MENTATION BREAKDOWN"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… PRÃ‰-REQUIS:"
echo "   â€¢ PHP 8.4+"
echo "   â€¢ MySQL/MariaDB"
echo "   â€¢ Laravel 12"
echo ""

echo "Ã‰TAPE 1: DÃ©marrer le serveur Laravel"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "$ cd /home/nicodeme/Bureau/D-Clic-2025/garage-laravel/GESTION_CLIENTS_APP"
echo "$ php artisan serve"
echo ""
echo "ğŸ“Œ Serveur accessible Ã : http://localhost:8000"
echo ""

echo "Ã‰TAPE 2: AccÃ©der Ã  l'application"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "URL: http://localhost:8000"
echo ""

echo "Ã‰TAPE 3: Se connecter EN TANT QUE CLIENT"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“§ Email: [voir seeders pour donnÃ©es test]"
echo "ğŸ” Mot de passe: [voir seeders pour donnÃ©es test]"
echo ""
echo "ğŸ’¡ Ou crÃ©er un compte client via:"
echo "   $ php artisan tinker"
echo "   > User::create(['name' => 'Test', 'email' => 'test@test.com', 'role' => 'client', ...])"
echo ""

echo "Ã‰TAPE 4: Naviguer vers le formulaire de panne"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "URL: http://localhost:8000/breakdowns/create"
echo ""

echo "Ã‰TAPE 5: TESTER LES CHAMPS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "A) VÃ‰HICULE"
echo "   â”œâ”€ Cliquez sur le dropdown"
echo "   â”œâ”€ SÃ©lectionnez un vÃ©hicule"
echo "   â””â”€ âœ… Le vÃ©hicule reste sÃ©lectionnÃ©"
echo ""

echo "B) DESCRIPTION"
echo "   â”œâ”€ Entrez 'Le moteur fait un bruit bizarre'"
echo "   â”œâ”€ Max 1000 caractÃ¨res"
echo "   â””â”€ âœ… La description s'affiche"
echo ""

echo "C) TÃ‰LÃ‰PHONE"
echo "   â”œâ”€ Essayez: '+33 6 12 34 56 78'"
echo "   â”œâ”€ Ou: '06 12 34 56 78'"
echo "   â”œâ”€ Ou: '(06) 12-34-56-78'"
echo "   â””â”€ âœ… Le numÃ©ro est acceptÃ©"
echo ""

echo "D) LOCALISATION"
echo "   â”œâ”€ Entrez: 'Avenue de la RÃ©publique, 75000 Paris'"
echo "   â”œâ”€ Max 255 caractÃ¨res"
echo "   â””â”€ âœ… La localisation s'affiche"
echo ""

echo "E) DÃ‰PANNAGE OUI/NON"
echo "   â”œâ”€ Cliquez sur 'NON'"
echo "   â”‚  â””â”€ Le sÃ©lecteur technicien est MASQUÃ‰"
echo "   â”‚"
echo "   â”œâ”€ Cliquez sur 'OUI'"
echo "   â”‚  â””â”€ Le sÃ©lecteur technicien APPARAÃT"
echo "   â”‚     â”œâ”€ Barre de recherche visible"
echo "   â”‚     â”œâ”€ Grille de cartes visible"
echo "   â”‚     â””â”€ Photos des techniciens affichÃ©es"
echo "   â”‚"
echo "   â””â”€ âœ… L'affichage bascule correctement"
echo ""

echo "F) RECHERCHE TECHNICIEN"
echo "   â”œâ”€ Taper dans la barre: 'dupont'"
echo "   â”œâ”€ Les rÃ©sultats se filtrent EN TEMPS RÃ‰EL"
echo "   â”œâ”€ Affiche: 'Jean Dupont - Moteur' (ou autre)"
echo "   â”œâ”€ Cliquer sur la carte"
echo "   â”œâ”€ Le radio button se coche automatiquement"
echo "   â””â”€ âœ… La recherche fonctionne + sÃ©lection OK"
echo ""

echo "Ã‰TAPE 6: SOUMETTRE LE FORMULAIRE"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… Remplissez tous les champs"
echo "âœ… Cliquez sur 'Signaler la panne'"
echo ""

echo "Ã‰TAPE 7: VÃ‰RIFIER LA CRÃ‰ATION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… Redirection vers /breakdowns/{id}"
echo "âœ… Message de succÃ¨s: 'Votre panne enregistrÃ©e...'"
echo "âœ… NumÃ©ro de tÃ©lÃ©phone affichÃ© dans le message"
echo ""

echo "Ã‰TAPE 8: VÃ‰RIFIER LA BD"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Entrez dans Tinker:"
echo "$ php artisan tinker"
echo ""
echo "VÃ©rifiez que la panne existe:"
echo "> Breakdown::latest()->first();"
echo ""
echo "RÃ©sultat attendu:"
echo "  {#1234"
echo "    'user_id' => <votre_id>,                    âœ…"
echo "    'vehicule_id' => <vehicule_id>,             âœ…"
echo "    'description' => 'Le moteur...',            âœ…"
echo "    'phone' => '+33 6 12 34 56 78',             âœ… NOUVEAU"
echo "    'location' => 'Avenue RÃ©publique...',       âœ… NOUVEAU"
echo "    'needs_technician' => 1,                    âœ… NOUVEAU"
echo "    'technicien_id' => 5,                       âœ…"
echo "    'status' => 'pending',                      âœ…"
echo "    'is_approved' => false,                     âœ…"
echo "  }"
echo ""

echo "Ã‰TAPE 9: TESTER LES RESTRICTIONS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Se connecter en tant que GESTIONNAIRE CLIENT:"
echo "ğŸ“Œ URL: http://localhost:8000/breakdowns/create"
echo "âŒ RÃ©sultat attendu: 403 Forbidden"
echo ""
echo "Se connecter en tant que RESPONSABLE SERVICES:"
echo "ğŸ“Œ URL: http://localhost:8000/breakdowns/create"
echo "âŒ RÃ©sultat attendu: 403 Forbidden"
echo ""
echo "Se connecter en tant que ADMIN:"
echo "ğŸ“Œ URL: http://localhost:8000/breakdowns/create"
echo "âŒ RÃ©sultat attendu: 403 Forbidden"
echo ""

echo "Ã‰TAPE 10: TESTS AUTOMATISÃ‰S"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ExÃ©cuter les tests:"
echo "$ php artisan test"
echo ""
echo "Ou juste les tests de breakdown:"
echo "$ ./vendor/bin/phpunit tests/Feature/BreakdownCreationTest.php --no-coverage"
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "  âœ… IMPLÃ‰MENTATION TESTÃ‰E ET VALIDÃ‰E!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“‹ FICHIERS Ã€ VÃ‰RIFIER:"
echo "  1. app/Http/Controllers/BreakdownController.php"
echo "  2. app/Models/Breakdown.php"
echo "  3. resources/views/breakdowns/create.blade.php"
echo "  4. database/migrations/2026_01_24_000001_add_fields_to_breakdowns_table.php"
echo ""
echo "ğŸ“š DOCUMENTATION:"
echo "  â€¢ IMPLEMENTATION_COMPLETE.md"
echo "  â€¢ IMPLEMENTATION_BREAKDOWN_COMPLETE.md"
echo "  â€¢ BREAKDOWN_FINAL_SUMMARY.txt"
echo ""
